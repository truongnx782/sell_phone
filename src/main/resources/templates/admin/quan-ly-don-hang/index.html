<!DOCTYPE html>

<html
        lang="en"
        class="light-style layout-menu-fixed"
        dir="ltr"
        data-theme="theme-default"
        data-assets-path="../assets/"
        data-template="vertical-menu-template-free"
        xmlns:th="http://www.thymeleaf.org"

>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>Quản lý hóa đơn</title>
</head>
<link rel="icon" type="image/x-icon" th:href="@{/assets/img/favicon/favicon.ico}">
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"/>
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/boxicons.css}">
<link rel="stylesheet" th:href="@{/assets/css/demo.css}">
<link rel="stylesheet" th:href="@{/assets/css/style.css}">
<link rel="stylesheet" th:href="@{/assets/vendor/css/core.css}" class="template-customizer-core-css">
<link rel="stylesheet" th:href="@{/assets/vendor/css/theme-default.css}" class="template-customizer-theme-css">
<link rel="stylesheet" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script type="text/javascript" th:src="@{/assets/vendor/js/helpers.js}"></script>
<script type="text/javascript" th:src="@{/assets/js/config.js}"></script>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
            <div class="app-brand demo">
                <a href="layout_tt.html" class="app-brand-link">
                    <img th:src="@{/assets/img/icons/logo/logo.png}" style="width: 202px; height: 58px">
                </a>
                <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
                    <i class="bx bx-chevron-left bx-sm align-middle"></i>
                </a>
            </div>

            <div class="menu-inner-shadow"></div>

            <ul class="menu-inner py-1">
                <!-- Dashboard -->
                <li class="menu-item">
                    <a th:onclick="|window.location.href='/thong-ke';|" class="menu-link">
                        <i class="menu-icon tf-icons bx bx-home-circle"></i>
                        <div data-i18n="Analytics">Thống kê</div>
                    </a>
                </li>

                <!--                Bán hàng tại quầy-->
                <li class="menu-item">
                    <a th:onclick="|window.location.href='/ban-hang-tai-quay/index';|" class="menu-link">
                        <i class='bx bxs-cart-alt me-3'></i>
                        <div>Bán hàng tại quầy</div>
                    </a>
                </li>
                <!--                Quản lý đơn hàng-->
                <li class="menu-item active">
                    <a th:onclick="|window.location.href='/quan-ly-don-hang/hien-thi';|" class="menu-link">
                        <i class='bx bxs-receipt me-3'></i>
                        <div>Quản lý đơn hàng</div>
                    </a>

                </li>
                <!--                Quản lý sản phẩm-->
                <li class="menu-item">
                    <a href="javascript:void(0);" class="menu-link menu-toggle">
                        <i class='bx bxs-shopping-bag me-3'></i>
                        <div data-i18n="Misc">Quản lý sản phẩm</div>
                    </a>
                    <ul class="menu-sub">
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/san-pham/index';|" class="menu-link">
                                <div>Sản phẩm</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/cameraTruoc/index';|" class="menu-link">
                                <div>Camera trước</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/cameraSau/index';|" class="menu-link">
                                <div>Camera sau</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/chip/index';|" class="menu-link">
                                <div>Chip</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/hang/index';|" class="menu-link">
                                <div>Hãng</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/he-dieu-hanh/index';|" class="menu-link">
                                <div>Hệ điều hành</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/man-hinh/index';|" class="menu-link">
                                <div>Màn hình</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/mau-sac/index';|" class="menu-link">
                                <div>Màu sắc</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/pin/index';|" class="menu-link">
                                <div>Pin</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/ram/index';|" class="menu-link">
                                <div>RAM</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/rom/index';|" class="menu-link">
                                <div>ROM</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/sim/index';|" class="menu-link">
                                <div>Sim</div>
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- Quản lý phiếu giảm giá-->
                <li class="menu-item">
                    <a th:onclick="|window.location.href='/phieu-giam-gia/index';|" class="menu-link">
                        <i class='bx bxs-discount me-3'></i>
                        <div>Phiếu giảm giá</div>
                    </a>
                </li>

                <!-- Quản lý nhân viên -->
                <li class="menu-item">
                    <a href="javascript:void(0);" class="menu-link menu-toggle">
                        <i class='bx bxs-shopping-bag me-3' ></i>
                        <div data-i18n="Misc">Quản lý nhân viên</div>
                    </a>
                    <ul class="menu-sub">
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/nhan-vien/hien-thi';|" class="menu-link">
                                <div>Nhân viên</div>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a th:onclick="|window.location.href='/chuc-vu/index';|" class="menu-link">
                                <div>Chức vụ</div>
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- Quản lý khách hàng -->
                <li class="menu-item">
                    <a th:onclick="|window.location.href='/khach-hang/hien-thi';|" class="menu-link">
                        <i class='bx bxs-user-detail me-3'></i>
                        <div>Quản lý khách hàng</div>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->

            <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
                 id="layout-navbar">
                <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
                    <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                        <i class="bx bx-menu bx-sm"></i>
                    </a>
                </div>

                <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                    <h4 class="fw-bold py-3 mb-2 mt-2" style="color: black">Quản lý hóa đơn</h4>


                    <ul class="navbar-nav flex-row align-items-center ms-auto">

                        <!-- User -->
                        <li class="nav-item navbar-dropdown dropdown-user dropdown">
                            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);"
                               data-bs-toggle="dropdown">
                                <div class="avatar avatar-online">
                                    <img src="../assets/img/avatars/avt.png" alt
                                         class="w-px-40 h-auto rounded-circle"/>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="content-wrapper">
                <!-- Content -->
                <div class="container-xxl flex-grow-1 container-p-y">

                    <div class="card container pb-5 mb-sm-4 mt-3">
                        <div class="card-header  justify-content-between align-items-center">
                            <!-- SEARCH AND FILTER -->
                            <div class="row mt-3">
                                <div class="col-md-5">
                                    <div class="search">
                                        <form th:action="@{/quan-ly-don-hang/hien-thi}" method="GET">
                                            <div class="input-group mb-3">
                                                <input name="search" type="text" class="form-control" placeholder="Tìm kiếm hóa đơn theo mã/số điện thoại khách hàng" />
                                                <input type="hidden" id="tabInput" name="tab" />
                                                <button style="background-color: #ff8548; color: white" class="btn" type="submit" id="button-addon2">Tìm kiếm</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="col-md-4"></div>
                                <div class="col-md-3 text-end">
                                    <a th:onclick="|window.location.href='/ban-hang-tai-quay/index';|" class="btn btn-primary" style="color: white">+ Tạo hóa đơn</a>
                                </div>
                            </div>


                        </div>

                        <div class="card-body">
                            <!-- Tabs -->
                            <ul class="nav nav-tabs" id="orderTabs" role="tablist">
                                <li class="nav-item">
                                    <a style="color: #8f0511" class="nav-link" id="waiting-confirm-tab" data-bs-toggle="tab"
                                       href="#waiting-confirm"
                                       role="tab" aria-controls="waiting-confirm" aria-selected="false">
                                        Chờ xác nhận <span
                                            class="badge rounded-pill badge-center h-px-20 w-px-20 bg-label-danger"
                                            th:text="${statusCount1}"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a style="color: #8f0511" class="nav-link" id="waiting-ship-tab" data-bs-toggle="tab" href="#waiting-ship"
                                       role="tab" aria-controls="waiting-ship" aria-selected="false">
                                        Chờ giao hàng <span
                                            class="badge rounded-pill badge-center h-px-20 w-px-20 bg-label-danger"
                                            th:text="${statusCount2}"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a style="color: #8f0511" class="nav-link" id="shipping-tab" data-bs-toggle="tab" href="#shipping"
                                       role="tab" aria-controls="shipping" aria-selected="false">
                                        Đang giao <span
                                            class="badge rounded-pill badge-center h-px-20 w-px-20 bg-label-danger"
                                            th:text="${statusCount3}"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a style="color: #8f0511" class="nav-link" id="completed-tab" data-bs-toggle="tab" href="#completed"
                                       role="tab" aria-controls="completed" aria-selected="false">
                                        Hoàn thành <span
                                            class="badge rounded-pill badge-center h-px-20 w-px-20 bg-label-danger"
                                            th:text="${statusCount4}"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a style="color: #8f0511" class="nav-link" id="cancelled-tab" data-bs-toggle="tab" href="#cancelled"
                                       role="tab" aria-controls="cancelled" aria-selected="false">
                                        Đã hủy <span
                                            class="badge rounded-pill badge-center h-px-20 w-px-20 bg-label-danger"
                                            th:text="${statusCount5}"></span>
                                    </a>
                                </li>
                            </ul>
                            <!-- Tab content -->
                            <div class="tab-content" id="orderTabsContent">
                                <!-- Tab chờ xác nhận -->
                                <div class="tab-pane fade show active" id="waiting-confirm" role="tabpanel"
                                     aria-labelledby="waiting-confirm-tab">
                                    <div class="table-responsive text-nowrap">
                                        <table style="color: black" id="orderTable1"
                                               class="table table-hover text-truncate">
                                            <caption class="ms-4"></caption>
                                            <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>MÃ ĐƠN HÀNG</th>
                                                <th>NHÂN VIÊN</th>
                                                <th>KHÁCH HÀNG</th>
                                                <th>LOẠI ĐƠN HÀNG</th>
                                                <th>TỔNG TIỀN</th>
                                                <th>TRẠNG THÁI</th>
                                                <th>NGÀY TẠO</th>
                                                <th>THAO TÁC</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="hd, iStat : ${listHD1}">
                                                <td th:text="${iStat.index + 1}"></td>
                                                <td th:text="${hd.maHD}"></td>
                                                <td th:text="${hd.idNhanVien.maNhanVien}"></td>
                                                <td>
                                                        <span th:if="${hd.idKhachHang != null}"
                                                              th:text="${hd.idKhachHang.getTenKhachHang() + ' - ' + hd.idKhachHang.getSdt()}"></span>
                                                    <span th:if="${hd.idKhachHang == null}">Khách lẻ</span>
                                                </td>
                                                <td>
                                    <span class="badge me-1"
                                          th:class="${hd.loaiHoaDon == 1 ? 'bg-label-primary badge me-1' : 'badge me-1 bg-label-success'}">
                                        [[${hd.loaiHoaDon == 1 ? 'Tại quầy' : 'Giao hàng'}]]
                                    </span>
                                                </td>
                                                <td th:text="${#strings.replace(#numbers.formatDecimal(hd.tongTienSauGiam, 0, 'COMMA', 2, 'POINT'), '.00', '')}"></td>
                                                <td>
                                                    <span class="badge me-1 bg-label-warning">Chờ xác nhận</span>
                                                </td>
                                                <td th:text="${#dates.format(hd.ngayTao, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <a class="dropdown-item"
                                                       th:href="@{/quan-ly-don-hang/view-detail/{id}(id=${hd.id})}">
                                                        <i class="bx bx-edit-alt me-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr th:if="${statusCount1 == 0}">
                                                <td colspan="9" class="text-center">Không có dữ liệu</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- Phân trang cho tab chờ xác nhận -->
                                        <nav aria-label="Page navigation" th:if="${totalPagesConfirm > 0}">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item prev"
                                                    th:classappend="${number1 == 0} ? 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number1-1})}">
                                                        <i class="tf-icon bx bx-chevrons-left"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a class="page-link bg-label-primary text-dark"
                                                       href="javascript:void(0);" th:text="${number1 + 1}"
                                                       style="background-color: #010a17;"></a>
                                                </li>
                                                <li class="page-item next"
                                                    th:classappend="${number1 < totalPagesConfirm - 1} ? '' : 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number1+1})}">
                                                        <i class="tf-icon bx bx-chevrons-right"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                                <!-- Tab chờ giao -->
                                <div class="tab-pane fade" id="waiting-ship" role="tabpanel"
                                     aria-labelledby="waiting-ship-tab">
                                    <div class="table-responsive text-nowrap">
                                        <table style="color: black" id="orderTable2"
                                               class="table table-hover text-truncate">
                                            <caption class="ms-4"></caption>
                                            <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>MÃ ĐƠN HÀNG</th>
                                                <th>NHÂN VIÊN</th>
                                                <th>KHÁCH HÀNG</th>
                                                <th>LOẠI ĐƠN HÀNG</th>
                                                <th>TỔNG TIỀN</th>
                                                <th>TRẠNG THÁI</th>
                                                <th>NGÀY TẠO</th>
                                                <th>THAO TÁC</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="hd, iStat : ${listHD2}">
                                                <td th:text="${iStat.index + 1}"></td>
                                                <td th:text="${hd.maHD}"></td>
                                                <td th:text="${hd.idNhanVien.maNhanVien}"></td>
                                                <td>
                                                        <span th:if="${hd.idKhachHang != null}"
                                                              th:text="${hd.idKhachHang.getTenKhachHang() + ' - ' + hd.idKhachHang.getSdt()}"></span>
                                                    <span th:if="${hd.idKhachHang == null}">Khách lẻ</span>
                                                </td>
                                                <td>
                                    <span class="badge me-1"
                                          th:class="${hd.loaiHoaDon == 1 ? 'bg-label-primary badge me-1' : 'badge me-1 bg-label-success'}">
                                        [[${hd.loaiHoaDon == 1 ? 'Tại quầy' : 'Giao hàng'}]]
                                    </span>
                                                </td>
                                                <td th:text="${#strings.replace(#numbers.formatDecimal(hd.tongTien, 0, 'COMMA', 2, 'POINT'), '.00', '')}"></td>
                                                <td>
                                                    <span class="badge me-1 bg-label-primary">Chờ giao hàng</span>
                                                </td>
                                                <td th:text="${#dates.format(hd.ngayTao, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <a class="dropdown-item"
                                                       th:href="@{/quan-ly-don-hang/view-detail/{id}(id=${hd.id})}">
                                                        <i class="bx bx-edit-alt me-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr th:if="${statusCount2 == 0}">
                                                <td colspan="9" class="text-center">Không có dữ liệu</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- Phân trang cho tab chờ giao -->
                                        <nav aria-label="Page navigation" th:if="${totalPagesChoGiao > 0}">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item prev"
                                                    th:classappend="${number2 == 0} ? 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number2-1})}">
                                                        <i class="tf-icon bx bx-chevrons-left"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a class="page-link bg-label-primary text-dark"
                                                       href="javascript:void(0);" th:text="${number2 + 1}"
                                                       style="background-color: #010a17;"></a>
                                                </li>
                                                <li class="page-item next"
                                                    th:classappend="${number2 < totalPagesChoGiao - 1} ? '' : 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number2+1})}">
                                                        <i class="tf-icon bx bx-chevrons-right"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                                <!-- Tab đang giao -->
                                <div class="tab-pane fade" id="shipping" role="tabpanel"
                                     aria-labelledby="shipping-tab">
                                    <div class="table-responsive text-nowrap">
                                        <table style="color: black" id="orderTable3"
                                               class="table table-hover text-truncate">
                                            <caption class="ms-4"></caption>
                                            <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>MÃ ĐƠN HÀNG</th>
                                                <th>NHÂN VIÊN</th>
                                                <th>KHÁCH HÀNG</th>
                                                <th>LOẠI ĐƠN HÀNG</th>
                                                <th>TỔNG TIỀN</th>
                                                <th>TRẠNG THÁI</th>
                                                <th>NGÀY TẠO</th>
                                                <th>THAO TÁC</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="hd, iStat : ${listHD3}">
                                                <td th:text="${iStat.index + 1}"></td>
                                                <td th:text="${hd.maHD}"></td>
                                                <td th:text="${hd.idNhanVien.maNhanVien}"></td>
                                                <td>
                                                        <span th:if="${hd.idKhachHang != null}"
                                                              th:text="${hd.idKhachHang.getTenKhachHang() + ' - ' + hd.idKhachHang.getSdt()}"></span>
                                                    <span th:if="${hd.idKhachHang == null}">Khách lẻ</span>
                                                </td>
                                                <td>
                                <span class="badge me-1"
                                      th:class="${hd.loaiHoaDon == 1 ? 'bg-label-primary badge me-1' : 'badge me-1 bg-label-success'}">
                                    [[${hd.loaiHoaDon == 1 ? 'Tại quầy' : 'Giao hàng'}]]
                                </span>
                                                </td>
                                                <td th:text="${#strings.replace(#numbers.formatDecimal(hd.tongTien, 0, 'COMMA', 2, 'POINT'), '.00', '')}"></td>
                                                <td>
                                                    <span class="badge me-1 bg-label-danger">Đang giao</span>
                                                </td>
                                                <td th:text="${#dates.format(hd.ngayTao, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <a class="dropdown-item"
                                                       th:href="@{/quan-ly-don-hang/view-detail/{id}(id=${hd.id})}">
                                                        <i class="bx bx-edit-alt me-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr th:if="${statusCount3 == 0}">
                                                <td colspan="9" class="text-center">Không có dữ liệu</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- PHÂN TRANG TAB ĐANG GIAO -->
                                        <nav aria-label="Page navigation" th:if="${totalPagesShipping > 0}">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item prev"
                                                    th:classappend="${number3 == 0} ? 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number3-1})}">
                                                        <i class="tf-icon bx bx-chevrons-left"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a class="page-link bg-label-primary text-dark"
                                                       href="javascript:void(0);" th:text="${number3 + 1}"
                                                       style="background-color: #010a17;"></a>
                                                </li>
                                                <li class="page-item next"
                                                    th:classappend="${number3 < totalPagesShipping - 1} ? '' : 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number3+1})}">
                                                        <i class="tf-icon bx bx-chevrons-right"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>

                                    </div>
                                </div>

                                <!-- Tab hoàn tất -->
                                <div class="tab-pane fade" id="completed" role="tabpanel"
                                     aria-labelledby="completed-tab">
                                    <div class="table-responsive text-nowrap">
                                        <table style="color: black" id="orderTable4"
                                               class="table table-hover text-truncate">
                                            <caption class="ms-4"></caption>
                                            <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>MÃ ĐƠN HÀNG</th>
                                                <th>NHÂN VIÊN</th>
                                                <th>KHÁCH HÀNG</th>
                                                <th>LOẠI ĐƠN HÀNG</th>
                                                <th>TỔNG TIỀN</th>
                                                <th>TRẠNG THÁI</th>
                                                <th>NGÀY TẠO</th>
                                                <th>THAO TÁC</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="hd, iStat : ${listHD4}">
                                                <td th:text="${iStat.index + 1}"></td>
                                                <td th:text="${hd.maHD}"></td>
                                                <td th:text="${hd.idNhanVien.maNhanVien}"></td>
                                                <td>
                                                        <span th:if="${hd.idKhachHang != null}"
                                                              th:text="${hd.idKhachHang.getTenKhachHang() + ' - ' + hd.idKhachHang.getSdt()}"></span>
                                                    <span th:if="${hd.idKhachHang == null}">Khách lẻ</span>
                                                </td>
                                                <td>
                                <span class="badge me-1"
                                      th:class="${hd.loaiHoaDon == 1 ? 'bg-label-primary badge me-1' : 'badge me-1 bg-label-success'}">
                                    [[${hd.loaiHoaDon == 1 ? 'Tại quầy' : 'Giao hàng'}]]
                                </span>
                                                </td>
                                                <td th:text="${#strings.replace(#numbers.formatDecimal(hd.tongTien, 0, 'COMMA', 2, 'POINT'), '.00', '')}"></td>
                                                <td>
                                                    <span class="badge me-1 bg-label-success">Hoàn thành</span>
                                                </td>
                                                <td th:text="${#dates.format(hd.ngayTao, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <a class="dropdown-item"
                                                       th:href="@{/quan-ly-don-hang/view-detail/{id}(id=${hd.id})}">
                                                        <i class="bx bx-edit-alt me-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr th:if="${statusCount4 == 0}">
                                                <td colspan="9" class="text-center">Không có dữ liệu</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- PHÂN TRANG TAB HOÀN TẤT -->
                                        <nav aria-label="Page navigation" th:if="${totalPagesComplete > 0}">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item prev"
                                                    th:classappend="${number4 == 0} ? 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number4-1})}">
                                                        <i class="tf-icon bx bx-chevrons-left"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a class="page-link bg-label-primary text-dark"
                                                       href="javascript:void(0);" th:text="${number4 + 1}"
                                                       style="background-color: #010a17;"></a>
                                                </li>
                                                <li class="page-item next"
                                                    th:classappend="${number4 < totalPagesComplete - 1} ? '' : 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number4+1})}">
                                                        <i class="tf-icon bx bx-chevrons-right"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>

                                    </div>
                                </div>

                                <!-- Tab đã hủy -->
                                <div class="tab-pane fade" id="cancelled" role="tabpanel"
                                     aria-labelledby="cancelled-tab">
                                    <div class="table-responsive text-nowrap">
                                        <table style="color: black" id="orderTable"
                                               class="table table-hover text-truncate">
                                            <caption class="ms-4"></caption>
                                            <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>MÃ ĐƠN HÀNG</th>
                                                <th>NHÂN VIÊN</th>
                                                <th>KHÁCH HÀNG</th>
                                                <th>LOẠI ĐƠN HÀNG</th>
                                                <th>TỔNG TIỀN</th>
                                                <th>TRẠNG THÁI</th>
                                                <th>NGÀY TẠO</th>
                                                <th>THAO TÁC</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="hd, iStat : ${listHD5}">
                                                <td th:text="${iStat.index + 1}"></td>
                                                <td th:text="${hd.maHD}"></td>
                                                <td th:text="${hd.idNhanVien.maNhanVien}"></td>
                                                <td>
                                                        <span th:if="${hd.idKhachHang != null}"
                                                              th:text="${hd.idKhachHang.getTenKhachHang() + ' - ' + hd.idKhachHang.getSdt()}"></span>
                                                    <span th:if="${hd.idKhachHang == null}">Khách lẻ</span>
                                                </td>
                                                <td>
                                <span class="badge me-1"
                                      th:class="${hd.loaiHoaDon == 1 ? 'bg-label-primary badge me-1' : 'badge me-1 bg-label-success'}">
                                    [[${hd.loaiHoaDon == 1 ? 'Tại quầy' : 'Giao hàng'}]]
                                </span>
                                                </td>
                                                <td th:text="${#strings.replace(#numbers.formatDecimal(hd.tongTien, 0, 'COMMA', 2, 'POINT'), '.00', '')}"></td>
                                                <td>
                                                    <span class="badge me-1 bg-label-danger">Đã hủy</span>
                                                </td>
                                                <td th:text="${#dates.format(hd.ngayTao, 'dd-MM-yyyy')}"></td>
                                                <td>
                                                    <a class="dropdown-item"
                                                       th:href="@{/quan-ly-don-hang/view-detail/{id}(id=${hd.id})}">
                                                        <i class="bx bx-edit-alt me-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr th:if="${statusCount5 == 0}">
                                                <td colspan="9" class="text-center">Không có dữ liệu</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- PHÂN TRANG TAB ĐÃ HỦY -->
                                        <nav aria-label="Page navigation" th:if="${totalPagesCancel > 0}">
                                            <ul class="pagination justify-content-center">
                                                <li class="page-item prev"
                                                    th:classappend="${number5 == 0} ? 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number5-1})}">
                                                        <i class="tf-icon bx bx-chevrons-left"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a class="page-link bg-label-primary text-dark"
                                                       href="javascript:void(0);" th:text="${number5 + 1}"
                                                       style="background-color: #010a17;"></a>
                                                </li>
                                                <li class="page-item next"
                                                    th:classappend="${number5 < totalPagesCancel - 1} ? '' : 'disabled'">
                                                    <a class="page-link"
                                                       th:href="@{/quan-ly-don-hang/hien-thi(tab=${currentTab}, page=${number5+1})}">
                                                        <i class="tf-icon bx bx-chevrons-right"
                                                           style="color: #010a17;"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>

                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <footer class="footer bg-light">
                <div
                        class="container-fluid d-flex flex-md-row flex-column justify-content-between align-items-md-center gap-1 container-p-x py-3">
                    <div>
                        <a href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/landing/"
                           target="_blank" class="footer-text fw-bolder ms-5">MPSHOP</a>
                        ©
                    </div>

                </div>
            </footer>
        </div>

    </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
<script type="text/javascript" th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
<script type="text/javascript" th:src="@{/assets/vendor/js/bootstrap.js}"></script>
<script type="text/javascript" th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>
<script type="text/javascript" th:src="@{/assets/vendor/js/menu.js}"></script>
<script type="text/javascript" th:src="@{/assets/js/main.js}"></script>
<script type="text/javascript" th:src="@{/assets/js/pages-account-settings-account.js}"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/print.js/1.6.0/print.min.js}"></script>

</body>


</html>
<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function () {
        var currentTab = localStorage.getItem('currentTab');
        if (currentTab) {
            var tabElement = document.getElementById(currentTab);
            if (tabElement) {
                tabElement.click();
            }
        }

        var tabLinks = document.querySelectorAll('[data-bs-toggle="tab"]');
        tabLinks.forEach(function (tabLink) {
            tabLink.addEventListener('shown.bs.tab', function (event) {
                localStorage.setItem('currentTab', event.target.id);
                document.getElementById('tabInput').value = event.target.id;

            });
        });


    });


</script>
